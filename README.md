# orcatoc

This an extension for Visual Studio Code that provides a separate toggleable TOC view in the sidebar.

## Features

This extension provides a separate toggleable TOC view in the sidebar. The TOC view is automatically populated with the contents of the ORCA output file that is currently open in the editor. The TOC view is generated by parsing the ORCA output file using regular expressions and setting up a tree view based on the results. The generated TOC view is a tree view with the titles of the headings in the ORCA output file and the corresponding line numbers. Clicking on a TOC entry will jump to the corresponding line in the ORCA output file. The TOC view can be toggled on and off by clicking on the `Orca Outline` icon in the sidebar. The TOC view can also be toggled on by running the command `Show Orca Outline` from the command palette. On Windows, the command palette can be opened with `Ctrl+Shift+P`, on Mac it is `Cmd+Shift+P`. The TOC view is automatically updated when navigating to a different ORCA output file.

## Requirements

N/A

## Extension Settings

The current version (0.1.0) of this extension does not have any settings.

## Known Issues

1. The TOC view will not automatically update when you save changes to the ORCA output file. You will need to manually run the command `Refresh Orca Outline` from the command palette. This will be fixed in a future release.

## Release Notes

Users appreciate release notes as you update your extension.

### 0.0.1

Initial release of orcatoc. This is a very early release and is still under development.

---

### 0.0.2

Added support for automatically showing TOC view when opening an ORCA output file.

`headings.md` file added to the extension. This file contains a list of regular expressions that are used to parse the ORCA output file. The list of regular expressions will be updated in future releases.

`generate_patterns.py` script added to the extension. This script is used to parse the `headings.md` file and generate the `patterns.json` file. The `patterns.json` file is used by the extension to parse the ORCA output file.

---

### 0.1.0

Update of `patterns.json` file and `headings.md` file. Additional regular expressions added to the list used to parse the ORCA output file. Most frequently used keywords in the ORCA output file are now parsed. The list of regular expressions will be updated in future releases.

## TODO

- [x] Automatically show TOC view when opening an ORCA output file
- [ ] Automatically update TOC view when saving changes to an ORCA output file (additional command to manually refresh TOC view)
- [ ] Add support for enabling/disabling TOC view for specific file types
- [ ] Add support for controlling the showing level of TOC entries
- [ ] Add illustrations to this README
- [ ] Add icon to this extension
- [x] Updating the list of regular expressions used to parse the ORCA output file

## Roadmap

The current version represents a very early release of this extension. 

The list of regular expressions in the `headings.md` file is parsed by converting each heading and the corresponding regular expression into a JSON object. The headings that will be displayed in the `ORCA FILE OUTLINE` is the heading text. This approach is not very flexible because some of the headings in the ORCA output file could be changed based on the type of calculation or in different versions of ORCA. In the next major release, the list of regular expressions will be more universal and the matched text will be displayed in the `ORCA FILE OUTLINE` view. The list of regular expressions will be updated in future releases. Most of the keywords in the ORCA output file are in full capital letters, which is not very user friendly. In the next major release, the matched text will be converted to title case before being displayed in the `ORCA FILE OUTLINE` view. There will be a list of keywords that will not be converted to title case. The list of keywords will be updated in future releases.

Another feature that will be added in the next major release is to enable the scrolling of the `ORCA FILE OUTLINE` view to the current line in the ORCA output file. This will be useful when the ORCA output file is very long and the user is navigating through the file. The `ORCA FILE OUTLINE` view will automatically scroll to the current line in the ORCA output file.

## For Developers

The list of regular expressions is saved in `patterns.json` file. The file contains a list of regular expressions that are used to parse the ORCA output file. Each regular expression is a JSON object with the following properties:

1. `regex`: The regular expression string
2. `level`: The level of the TOC entry (1, 2, 3, etc.)
3. `title`: The title of the TOC entry to be displayed in the TOC view

It is easier to add new headings to the list of regular expressions by editing the `headings.md` file. This file contains a list of regular expressions that are used to parse the ORCA output file. The `generate_patterns.py` script is used to parse the `headings.md` file and generate the `patterns.json` file. The `patterns.json` file is used by the extension to parse the ORCA output file.

Please submit a pull request if you would like to add a new regular expression to the list. Please also submit a pull request if you would like to modify an existing regular expression.

## For more information

[ORCA forum](https://orcaforum.kofo.mpg.de/)

[ORCA Input Library](https://sites.google.com/site/orcainputlibrary/home)

**Enjoy!**
